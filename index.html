<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sidethorn — WhimsyGoth</title>
<link rel="manifest" href="manifest.json">
<style>
  body{margin:0;font-family:Georgia, serif;background:#07030a;color:#efe8ff;min-height:100vh;
    background-image: url("assets/images/background.png");background-size:cover; background-position:center;}
  .app{max-width:680px;margin:24px auto;padding:20px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.25));border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.6);}
  h1{margin:0;font-family: 'Palatino', serif;color:#cfd8ff;text-shadow:0 2px 6px rgba(0,0,0,0.7);}
  .streak{margin-top:14px;display:flex;gap:8px;align-items:center}
  .cell{width:34px;height:34px;border-radius:6px;background:#2b2130;display:flex;align-items:center;justify-content:center;border:2px solid rgba(120,90,160,0.6);}
  .cell.filled{background:linear-gradient(180deg,#7be8d8,#4fbfdf);transform:scale(1.05);}
  .tasks{margin-top:18px}
  .task{background:rgba(10,6,18,0.6);padding:12px;border-radius:8px;margin-bottom:8px;border:1px solid rgba(150,120,180,0.12);display:flex;align-items:center;gap:12px}
  .task img{width:36px;height:36px}
  .controls{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
  button{background:#6ee7df;border:none;padding:8px 12px;border-radius:8px;color:#050006;font-weight:700;cursor:pointer}
</style>
</head><body>
<div class="app">
  <h1>Sidethorn — WhimsyGoth</h1>
  <div class="streak" id="streakRow"></div>
  <div class="controls"><button id="add">Add Task</button><button id="setInterval">Set Reminder Interval</button><button id="progress">Character</button></div>
  <div class="tasks" id="tasks"></div>
</div>
<script>
const icons = ['sword','lantern','potion','ghost','skull','spellbook','crystal'];
function el(q){return document.querySelector(q)}
function makeCell(i){let d=document.createElement('div');d.className='cell filled';d.innerHTML='⚙️';return d}
function renderStreak(streak){const row=el('#streakRow');row.innerHTML='';for(let i=0;i<streak;i++){row.appendChild(makeCell(i))}}
let tasks=[];let streak=0;let reminder=10;
function save(){localStorage.tasks=JSON.stringify(tasks);localStorage.streak=streak;localStorage.reminder=reminder}
function load(){tasks=JSON.parse(localStorage.tasks||'[]');streak=parseInt(localStorage.streak||'0');reminder=parseInt(localStorage.reminder||'10')}
function renderTasks(){const n=el('#tasks');n.innerHTML='';tasks.forEach((t,i)=>{const div=document.createElement('div');div.className='task';div.innerHTML=`<img src="assets/icons/${icons[i%icons.length]}.png"><div style="flex:1"><strong>${t.title}</strong><div style="font-size:12px;color:#bfb3e8">${t.completed?'Completed':''}</div></div><button onclick="complete(${i})">Complete</button>`;n.appendChild(div)})}
function add(){const title=prompt('Task title');if(title){tasks.push({title,completed:false});save();renderTasks()}}
function complete(i){tasks[i].completed=true;save();renderTasks();checkStreak()}
function checkStreak(){if(tasks.length>0 && tasks.every(t=>t.completed)){streak++;alert('Power-up! Streak continues! ⚡')}else{if(streak>0){streak=0;alert('Streak lost — the whimsy ghost giggles.')}}save();renderStreak(streak)}
el('#add').addEventListener('click',add);el('#setInterval').addEventListener('click',()=>{const v=prompt('Interval (5-60)',reminder);const n=parseInt(v);if(!isNaN(n)&&n>=5&&n<=60){reminder=n;save();alert('Set')}})
el('#progress').addEventListener('click',()=>{alert('Character screen — XP, level, perks coming soon!')})
load();renderTasks();renderStreak(streak);
// reminders
setInterval(()=>{tasks.forEach(t=>{if(!t.completed) { if(Notification.permission==='granted'){new Notification('Reminder: '+t.title)} else if(Notification.permission!=='denied'){Notification.requestPermission().then(p=>{if(p==='granted')new Notification('Reminder: '+t.title)})}} })}, reminder*60*1000)
</script>
</body></html>